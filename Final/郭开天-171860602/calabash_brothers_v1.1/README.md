# JAVA大作业文档

## 介绍



主界面为一个大小为700*700像素的棋盘，棋盘划分为7*7块，每块可以容纳一个生物。

战斗开始时，葫芦娃和妖怪分别在地图的左侧和右侧，当用户按下空格键时，所有生物开始活动。

当一个生物出现在敌对生物的路径上时，该生物被杀死，并留下尸体，尸体会阻碍生物的行动，几回合后消失。

![1](pic\1.png)当葫芦娃或妖精任意一方生物全部死亡，战斗结束，录像文件将被自动保存。

当用户按下L键时，自动重放战斗录像。

## 程序设计
### UML图展示
![2](pic\2.png)

### 主要类说明

#####Creature类，生物类
是一种较为主要的模型类，每个生物具有位置，阵营，编号，图片，以及一些其他辅助属性。

此类实现了Runnable接口，run函数实现了生物体行为的并行处理。

生物体线程的运行逻辑为，在地图上随机移动，向地图中央移动的概率较高，如果发现目标位置有敌对生物体，则攻击并杀死目标生物。

#####BattleField类，战场类
提供场地记录了所有战场上的生物，兼具并发控制，存取录像的功能。

#####Formation类，阵型类
指导BattleField布置战斗开始时的阵型。

## 技术方法
### JAVAFX
JavaFX技术有着良好的前景，包括可以直接调用Java API的能力。因为 JavaFX Script是静态类型，它同样具有结构化代码、重用性和封装性，如包、类、继承和单独编译和发布单元，这些特性使得使用JavaFX技术创建和管理大型程序变为可能。在JavaFX中，类的成员函数和操作本身被模式化作为在目标类中的类，而形参和返回值被表示为属性。代表目标对象的属性名是“this”。代表返回值的属性名为“return”。代表形参的属性具有和形参相同的属性名。而目标对象则指使用成员函数和操作的对象。从上例中可以发现，你也可以从Class对象中获取相同的、被反射的操作。被反射的操作能够像函数那样通过将目标对象作为第一个参数、其它参数作为后面的参数的方式被调用。
### 反射
JAVA反射机制是在运行状态中，对于任意一个类，都能够知道这个类的所有属性和方法；对于任意一个对象，都能够调用它的任意方法和属性；这种动态获取信息以及动态调用对象方法的功能称为java语言的反射机制。我们在队形类中使用了反射，以调用生物体走动，完成队形。
### 泛型
泛型，即“参数化类型”。一提到参数，最熟悉的就是定义方法时有形参，然后调用此方法时传递实参。那么参数化类型怎么理解呢？顾名思义，就是将类型由原来的具体的类型参数化，类似于方法中的变量参数，此时类型也定义成参数形式（可以称之为类型形参），然后在使用/调用时传入具体的类型（类型实参）。我们在队形类中使用了泛型，以同时应用于葫芦娃和妖怪。
### JAVA集合类型
容器是指实例为其他类的对象的集合的类、数据结构、或者抽象数据类型。换言之，它们以一种遵循特定访问规则的系统的方法来存储对象。容器的大小取决于其包含的对象（或元素）的数目。潜在的不同容器类型的实现可能在空间和时间复杂度上有所差别，这使得在给定应用场景中选择合适的某种实现具有灵活性。
Java内部的容器类主要分为两类：Collection(集合)与Map(图)，我们这里使用了Map中的HashMap。
### 注解
Java注解（Annotation）又称Java标注，是JDK5.0约会的一种注释机制。和Javadoc不同，Java标注可以通过反射获取标注内容。在编译器生成类文件时，标注可以被嵌入到字节码中。 Java虚拟机可以保留注释内容，在运行时可以获取到注释内容。当然它也支持自定义Java注释。我们在程序中主要在测试类中使用了注解，和继承的时候使用了@Override
### 输入输出
Java中执行输出和输入操作，需要通过IO流。例如最常见的System.out.println()就是一个输出流。IO流的类比较多，但核心体系就是由File、 InputStream 、OutputStream、Reader、Writer和Serializable(接口)组成的。我们这里使用了BufferReader和BufferWriter。
### 单元测试用例
我们这里使用了JUnit4来进行单元测试
### 继承 封装 多态
所谓封装：
也就是把客观事物封装成抽象的类，并且类可以把自己的数据和方法只让可信的类或者对象操作，对不可信的进行信息隐藏。封装是面向对象的特征之一，是对象和类概念的主要特性。 简单的说，一个类就是一个封装了数据以及操作这些数据的代码的逻辑实体。在一个对象内部，某些代码或某些数据可以是私有的，不能被外界访问。通过这种方式，对象对内部数据提供了不同级别的保护，以防止程序中无关的部分意外的改变或错误的使用了对象的私有部分。
所谓继承：
是指可以让某个类型的对象获得另一个类型的对象的属性的方法。它支持按级分类的概念。继承是指这样一种能力：它可以使用现有类的所有功能，并在无需重新编写原来的类的情况下对这些功能进行扩展。 通过继承创建的新类称为“子类”或“派生类”，被继承的类称为“基类”、“父类”或“超类”。继承的过程，就是从一般到特殊的过程。要实现继承，可以通过“继承”（Inheritance）和“组合”（Composition）来实现。继承概念的实现方式有二类：实现继承与接口继承。实现继承是指直接使用基类的属性和方法而无需额外编码的能力；接口继承是指仅使用属性和方法的名称、但是子类必须提供实现的能力；
所谓多态：
就是指一个类实例的相同方法在不同情形有不同表现形式。多态机制使具有不同内部结构的对象可以共享相同的外部接口。这意味着，虽然针对不同对象的具体操作不同，但通过一个公共的类，它们（那些操作）可以通过相同的方式予以调用。
在JAVA的程序设计中，这三大特性无处不在。